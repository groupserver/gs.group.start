<html metal:use-macro="context/@@groupserver_site_home_layout/page">
  <head>
    <title metal:fill-slot="title">
      <span tal:replace="string:${view/label}: ${view/siteInfo/name}">
         Start Group
      </span>
    </title>
  </head>
  <body>
    <div metal:fill-slot="messages" tal:condition="view/status" 
      class="message-error"
      tal:define="e view/errors"
      tal:attributes="class python:e and 'message-error' or 'message-result'">
      <p class="form-status" tal:content="structure view/status"/>
      <dl tal:condition="view/errors">
        <tal:block repeat="widget view/widgets">
          <tal:block tal:condition="widget/error">
            <dt tal:content="widget/label">Widget Name</dt>
            <dd class="error" 
              tal:content="structure widget/error">Error message</dd>
          </tal:block>
        </tal:block>
      </dl>
    </div>
    <tal:block metal:fill-slot="body">
      <form enctype="multipart/form-data"  method="post" action="."
        tal:attributes="action request/URL" id="start-group">
        <h1 tal:content="view/label">Start Group</h1>
        <tal:block 
          define="widgets python:[view.widgets['grpName'], view.widgets['grpId']]">
          <tal:block 
            replace="structure provider:groupserver.FormWidgets"/>
        </tal:block>
        <div id="group-id-error" style="display:none;"
          class="widget-error ui-state-error ui-corner-all">
          <p>
            <span style="float: left; margin-right: 0.39em;" 
              class="ui-icon ui-icon-alert">&#160;</span>
            <strong>Group ID In Use:</strong>
            The Group ID <code>above</code> is already being used.
            Please pick another group ID.
          </p>
        </div><!--group-id-error-->
        <tal:block define="widgets python:[view.widgets['grpPrivacy']]">
          <tal:block 
            replace="structure provider:groupserver.FormWidgets"/>
        </tal:block>
        <div class="noFloat">&#160;</div>
        <p id="group-preview" style="padding:0.69em;"
          class="preview ui-state-highlight ui-corner-all" >
          The new group will have the <strong>name</strong>
          <cite id="group-title-preview" class="grpFn">&#8230;</cite>.
          Members can post to the group by sending <strong>email</strong>
          to
          <code class="email"><span class="groupId">&#8230;</span>@<span tal:content="view/emailDomain">?</span></code>
          or by using the web.
          The <strong>web address</strong> for the group will be 
          <code class="url"><span tal:content="view/siteInfo/url">&#8230;</span>/groups/<span class="groupId">&#8230;</span></code>.
          <span id="visiblity-preview">The group and posts will be
            visible to anyone, including search engines, and anyone
            can join the group.</span>
        </p>
        <div class="buttons" tal:condition="view/availableActions">
          <tal:block repeat="action view/actions">
            <div class="formelementbutton">
              <span tal:replace="structure action/render">Button</span>
            </div>
          </tal:block>
        </div><!--buttons-->
      </form>
    </tal:block>
    <tal:block metal:fill-slot="javascript">
      <script type="text/javascript"
        src="/++resource++check_required-20071214.js">&#160;</script>
      <script type="text/javascript"
        tal:define="widgets view/widgets; 
          button string:#form\\.actions\\.start"
        tal:content="provider:groupserver.RequiredWidgetsJavaScript">
        alert("I have not been replaced.");
      </script>
      <script type="text/javascript"
        src="/++resource++popup_help-20071218.js">&#160;</script>
      <script type="text/javascript" 
        src="/++resource++wymeditor-20090831/jquery.wymeditor.js">&#160;</script>
      <script type="text/javascript"
        src="/++resource++gswym.js">&#160;</script>
      <script type="text/javascript">
        jQuery.noConflict()
        jQuery(document).ready( function () {
            GSPopupFormHelp.init('#start-group');
        });
      </script>
      <script type="text/javascript"
        src="/++resource++startgroup-20101110.js">&#160;</script>
    </tal:block>
  </body>
</html>

